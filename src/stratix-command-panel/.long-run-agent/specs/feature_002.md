# Feature feature_002 - 参数表单编辑

## 元信息
- **优先级**: P0
- **负责人**: stratix-team
- **预计工时**: 4天
- **创建时间**: 2026-02-22 17:21:47

## 功能描述
根据选中的技能，动态生成参数表单，支持用户输入/选择指令参数，并进行实时参数校验。确保用户输入的参数符合技能配置要求。

## 功能设计方案

### 1. 动态表单生成
- **触发条件**：接收来自 SkillList 组件的 `skill-selected` 事件
- **数据源**：`StratixSkillConfig.parameters` 数组
- **表单项类型映射**：
  - `string` → 文本输入框（Input/Textarea）
  - `number` → 数字输入框（InputNumber）
  - `boolean` → 开关（Switch/Checkbox）
  - `enum` → 下拉选择（Select/RadioGroup）

### 2. 参数校验机制
- **必填校验**：`required: true` 的参数不能为空
- **类型校验**：
  - `string`：非空字符串（如果 required）
  - `number`：数字类型，符合 min/max 范围
  - `enum`：选项必须在 enumValues 列表中
- **实时反馈**：输入时实时校验，显示错误提示
- **错误提示样式**：红色边框 + 红色错误文本

### 3. 表单交互
- **实时预览**：输入参数时，实时显示指令预览（可选）
- **参数重置**：点击"重置"按钮，恢复默认值
- **参数保存**：保存当前技能的参数配置（可选）
- **快捷输入**：支持历史参数快速选择（可选）

### 4. 视觉设计
- **布局**：垂直排列，每个参数一行
- **标签样式**：
  - 参数名：加粗，14px
  - 必填标记：红色星号 (*)
  - 参数描述：灰色小字，12px
- **输入框样式**：
  - 正常状态：白色背景，灰色边框
  - 聚焦状态：蓝色边框
  - 错误状态：红色边框 + 错误提示

### 5. 技术实现
**文件结构**：
```
src/stratix-command-panel/
├── components/
│   └── ParamForm.vue          # 参数表单组件
└── utils/
    └── ParamValidator.ts      # 参数校验工具
```

**核心接口**：
- 接收事件：`skill-selected`
- 发射事件：`submit`（传递参数对象）

**依赖**：
- Vue 3 Composition API
- Element Plus / Ant Design（可选）

## 开发步骤
- [ ] 步骤 1：创建 ParamForm.vue 组件基础结构
- [ ] 步骤 2：实现动态表单生成逻辑（根据参数类型渲染不同组件）
- [ ] 步骤 3：实现 ParamValidator.ts 校验工具类
- [ ] 步骤 4：实现实时校验逻辑（blur/focus 事件）
- [ ] 步骤 5：实现参数重置功能
- [ ] 步骤 6：实现表单提交逻辑（校验通过后发射 submit 事件）
- [ ] 步骤 7：编写样式（符合 Stratix 设计规范）
- [ ] 步骤 8：编写单元测试

## 测试用例
| 用例编号 | 场景 | 操作步骤 | 预期结果 |
|----------|------|----------|----------|
| TC-001 | 文本参数测试（必填） | 参数类型为 `string`，必填，留空提交 | 显示错误提示"不能为空" |
| TC-002 | 文本参数测试（非空） | 参数类型为 `string`，必填，输入任意文本 | 校验通过 |
| TC-003 | 数字参数测试（范围） | 参数类型为 `number`，min=1，max=100，输入 0 | 显示"不能小于 1" |
| TC-004 | 数字参数测试（范围） | 参数类型为 `number`，min=1，max=100，输入 50 | 校验通过 |
| TC-005 | 枚举参数测试 | 参数类型为 `enum`，选项为 ["正式", "活泼"]，选择"正式" | 校验通过 |
| TC-006 | 动态表单生成测试 | 切换技能（从"快速写文案"到"文案优化"） | 表单参数项自动更新，默认值填充 |
| TC-007 | 表单提交测试 | 填写所有必填参数，点击"执行指令" | 触发 submit 事件，携带完整参数 |

## 验收标准
- [ ] 根据技能参数配置动态生成表单
- [ ] 支持多种参数类型（string/number/boolean/enum）
- [ ] 实时校验参数有效性，显示清晰的错误提示
- [ ] 表单提交前进行完整校验
- [ ] 支持参数重置功能
- [ ] UI 样式符合 Stratix 设计规范（标签、输入框、错误提示）
- [ ] 代码通过 ESLint 检查，无类型错误

## 变更记录
| 日期 | 变更内容 | 变更人 |
|------|----------|--------|
| 2026-02-22 | 初始创建 | AI Assistant |
| 2026-02-22 | 迁移内容到 LRA 标准格式 | AI Assistant |
